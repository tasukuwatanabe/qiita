---
title: 画像ファイルをリネームする際は `git mv` を使おう
tags:
  - 'git'
private: true
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---

## はじめに

こんにちは。HRBrainでオウンドメディア・ランディングページの開発を担当している渡邉です。

Gitを使用していると、ファイル名の変更が思い通りに認識されないことがあります。

特に、画像ファイルの名前を大文字や小文字で変更する際、この問題はしばしば発生します。

この記事では、実際に経験した具体的なケースを元に、Gitでファイル名を変更する際の適切な対処方法について詳しく説明します。

## 問題発生のケース：`hoge.jpg` を `HOGE.jpg` にリネーム

プロジェクトの中で、画像ファイル `hoge.jpg` を `HOGE.jpg` に名前を変えました。

しかし、ローカル環境ではファイル名が変更されていたにもかかわらず、Gitのステージングエリアにはその変更が反映されていませんでした。

このため、リポジトリ上でもファイル名の変更が記録されず、期待通りの結果が得られませんでした。

## なぜGitがリネームを見逃すのか？

Gitは通常、ファイル名の変更を「削除」と「新規作成」として扱います。

しかし、特定のファイルシステム設定やファイル名の変更内容によっては、Gitがリネームを認識しない場合があります。

- **ケースセンシティブなファイルシステム**：大文字・小文字の違いを正確に区別します。
- **ケースインセンシティブなファイルシステム**：大文字・小文字を区別せず、同一視します。

たとえば、WindowsやmacOSで使用されるHFS+はケースインセンシティブなファイルシステムです。

そのため、`hoge.jpg` から `HOGE.jpg` への変更を行っても、Gitはその違いを認識せず、変更があったとはみなしません。

## 解決方法： `git mv` を利用する

この問題を避けるための最も簡単な方法は、ファイルをリネームする際に `git mv` コマンドを使うことです。

```bash
git mv -f hoge.jpg HOGE.jpg
```

このコマンドを使うことで、Gitはファイルのリネームを正しく認識し、差分として記録します。

## 解決方法2: 

```bash
git config core.ignorecase false
```

## まとめ

ファイル名を変更するだけの単純な操作でも、Gitの動作やファイルシステムの違いによって予期しない問題が発生することがあります。

特に、ファイル名の大文字・小文字を変更する場合は、`git mv` コマンドを使用することで、確実にリネームをGitに認識させることができます。

この手法を用いることで、Gitによるバージョン管理がスムーズに行えるようになります。

## PR

HRBrainではコミュニケーションデザインエンジニア（ウェブ制作/フロントエンド）の採用も行なっているので、ぜひ！

https://hrmos.co/pages/hrbrain/jobs/2110310

https://hrmos.co/pages/hrbrain/jobs/23020910